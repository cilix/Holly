let Person = fn name, age {
  return { 
    name: name,
    age: age,
    speak: fn self {
      print('Hello, my name is ' + self.name)
    }
  }
}

-- or, sugar for functions returning a single expression
let Person = fn name, age -> 
  { name: name, age: age, 
    speak: fn self -> 
      print('hello, my name is ' + self.name) }

let bob = Person('bob', 25)

bob.speak(bob)

-- or, sugar for implicitly passing the object as the first value
bob::speak()

let add = fn x, y -> x + y

let a = add(2, 3)


-- parsing a variable from a string (translated from c)
hl_pname s, v {
  let i = 0
  let b = nil
  while 
    hl_isalpha(v[i]) or 
    hl_isdigit(v[i]) or
    v[i] == '_' {
    i += 1
  }
  return slice(v, i)
}